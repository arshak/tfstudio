

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Setting up a database &mdash; tfstudio  documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/logo_cropped_tudio.svg"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="tfstudio  documentation" href="index.html"/>
        <link rel="prev" title="Setting up a remote worker" href="remote_worker.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> tfstudio
          

          
            
            <img src="_static/logo_cropped_tudio.svg" class="logo" />
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="artifacts.html">Artifact management</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloud.html">Cloud computing for studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="customenv.html">Customization of python environment for the workers</a></li>
<li class="toctree-l1"><a class="reference internal" href="ec2_setup.html">Configuring tfstudio to work with Amazon EC2 cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="gcloud_setup.html">Setting up google cloud compute</a></li>
<li class="toctree-l1"><a class="reference internal" href="hyperparams.html">Hyperparameter search</a></li>
<li class="toctree-l1"><a class="reference internal" href="remote_worker.html">Setting up a remote worker</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Setting up a database</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-firebase-project-and-configuring-tensorflow-studio">Creating firebase project and configuring TensorFlow Studio</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-users">Configuring users</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-an-authentication-app-for-google-account-authentication">Setting up an authentication app for google account authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="#test-run">Test run</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">tfstudio</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Setting up a database</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/setup_database.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="setting-up-a-database">
<h1>Setting up a database<a class="headerlink" href="#setting-up-a-database" title="Permalink to this headline">¶</a></h1>
<p>This page describes the process of setting up your own database /
storage for the models. This puts you in full control of who has access
to the experiment data. For the moment, tfstudio only supports FireBase
(<a class="reference external" href="https://firebase.google.com/">https://firebase.google.com/</a>) as a database/storage backend. To
configure tfstudio to work with firebase, do the following:</p>
<div class="section" id="creating-firebase-project-and-configuring-tensorflow-studio">
<h2>Creating firebase project and configuring TensorFlow Studio<a class="headerlink" href="#creating-firebase-project-and-configuring-tensorflow-studio" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Create a copy of studio/default_config.yaml file. Let’s call it
new_config.yaml</li>
<li>Create a new firebase project: go to <a class="reference external" href="https://firebase.google.com">https://firebase.google.com</a>,
sign in, click add project, specify project name</li>
<li>Go to project settings (little cogwheel next to “Overview” on a
left-hand pane), tab “General”</li>
<li>Copy Web API key and paste it in apiKey of database section of
new_config.yaml</li>
<li>Copy project ID and paste it in projectId of database section of
new_config.yaml</li>
<li>Go to “Cloud messaging tab”, copy Sender ID and paste it in
messagingSenderId of database section of new_config.yaml</li>
</ol>
</div>
<div class="section" id="configuring-users">
<h2>Configuring users<a class="headerlink" href="#configuring-users" title="Permalink to this headline">¶</a></h2>
<p>To enable email/password authentication within the Firebase client
uncommented the use_email_auth tag in your new_config.yaml. Add
users. By default, firebase (both database and storage) grants read and
write access to all authenticated users Go to Authentication in Firebase
console (on left-hand pane), tab sign-in methods, and enable methods
that you would like to use. For now, studio supports google account
authentication, and email/password authentication. If you have choosen
to use the email/password method for authentication, use the Users tab
of the Authentication panel to manually add yourself with a password.
This password is not shared by other google services, if this is what
you want then google account based authentication is needed, therefore
you should always use a unique password. Further, you can customize the
database / storage access rules (good read for that is
<a class="reference external" href="https://firebase.google.com/docs/database/security/">https://firebase.google.com/docs/database/security/</a> and
<a class="reference external" href="https://firebase.google.com/docs/storage/security/start">https://firebase.google.com/docs/storage/security/start</a>) The default
rules allow read and write access to all authenticated users, to both
storage and database. This might not be quite the behaviour that you
would want, because then users can freely delete / modify experiments of
each other. To make experiments readable by everyone, but writeable only
by creator, a bit more involved rules are needed. The examples of such
rules (that are used at the default studio firebase app) are given in
<code class="docutils literal"><span class="pre">auth/firebase_db.rules</span></code> and <code class="docutils literal"><span class="pre">auth/firebase_storage.rules</span></code> for
database and storage.</p>
</div>
<div class="section" id="setting-up-an-authentication-app-for-google-account-authentication">
<h2>Setting up an authentication app for google account authentication<a class="headerlink" href="#setting-up-an-authentication-app-for-google-account-authentication" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Create a new Firebase project from the [console]
(<a class="reference external" href="https://console.firebase.google.com">https://console.firebase.google.com</a>)</p>
</li>
<li><p class="first">Under the authentication tab in the console, turn on the Google
authentication provider</p>
</li>
<li><p class="first">Install Firebase CLI (<a class="reference external" href="https://firebase.google.com/docs/cli/">https://firebase.google.com/docs/cli/</a>)</p>
</li>
<li><p class="first">We will be deploying a firebase app, so the following is the summary
of (<a class="reference external" href="https://firebase.google.com/docs/hosting/deploying">https://firebase.google.com/docs/hosting/deploying</a>). The app
iteslf is a modified authentication code example from here:
<a class="reference external" href="https://firebase.google.com/docs/samples/">https://firebase.google.com/docs/samples/</a></p>
</li>
<li><p class="first">Go to studio/auth folder and run</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">firebase</span> <span class="n">init</span>
</pre></div>
</div>
</li>
<li><p class="first">Select Hosting by pressing space, press Enter to continue</p>
</li>
<li><p class="first">Select the right firebase project (if you have more than one)</p>
</li>
<li><p class="first">Answer ‘N’ to the remaining questions</p>
</li>
<li><p class="first">Run</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">firebase</span> <span class="n">deploy</span>
</pre></div>
</div>
</li>
<li><p class="first">To test successful deployment, go the /index.html url (where
hosting_url was output by firebase deploy). You should see page
titled “Firebase Authentication” that either has a button “SIGN IN”
or “SIGN OUT” and your authentication details below.</p>
</li>
</ol>
</div>
<div class="section" id="test-run">
<h2>Test run<a class="headerlink" href="#test-run" title="Permalink to this headline">¶</a></h2>
<p>Go to the studio/helloworld/ folder, and run</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">studio</span> <span class="n">run</span> <span class="o">--</span><span class="n">config</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">new_config</span><span class="o">.</span><span class="n">yaml</span> <span class="n">train_mnist_keras</span><span class="o">.</span><span class="n">py</span> <span class="mi">10</span>
</pre></div>
</div>
<p>(10 stands for the number of training epochs). You should be prompted
for your user email and password (if you have uncommented
use_email_auth in new_config.yaml), or block to wait for studio to
authenticate. When entering email/password combinations you may be
prompted several times to enter your details. Then (or in another
terminal) run</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">studio</span> <span class="n">ui</span> <span class="o">--</span><span class="n">config</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">new_config</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
<p>and go to <a class="reference external" href="http://localhost:5000">http://localhost:5000</a> in the browser to see the results of the
experiment.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="remote_worker.html" class="btn btn-neutral" title="Setting up a remote worker" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>