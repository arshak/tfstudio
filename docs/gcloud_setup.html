

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Setting up google cloud compute &mdash; tfstudio  documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/_static/css/theme.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="tfstudio  documentation" href="index.html"/>
        <link rel="next" title="Hyperparameter search" href="hyperparams.html"/>
        <link rel="prev" title="Configuring tfstudio to work with Amazon EC2 cloud" href="ec2_setup.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> tfstudio
          

          
            
            <img src="_static/logo.png" class="logo" />
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="artifacts.html">Artifact management</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloud.html">Cloud computing for studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="customenv.html">Customization of python environment for the workers</a></li>
<li class="toctree-l1"><a class="reference internal" href="ec2_setup.html">Configuring tfstudio to work with Amazon EC2 cloud</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Setting up google cloud compute</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">Setting up google cloud compute</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-select-a-new-google-cloud-project">Create / select a new google cloud project</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enable-billing-for-the-project">Enable billing for the project</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generate-service-credentials">Generate service credentials</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-studio">Setting up studio</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#adding-credentials">Adding credentials</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modifying-the-configuration-file">Modifying the configuration file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test">Test</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hyperparams.html">Hyperparameter search</a></li>
<li class="toctree-l1"><a class="reference internal" href="remote_worker.html">Setting up a remote worker</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup_database.html">Setting up a database</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">tfstudio</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Setting up google cloud compute</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/gcloud_setup.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="setting-up-google-cloud-compute">
<h1>Setting up google cloud compute<a class="headerlink" href="#setting-up-google-cloud-compute" title="Permalink to this headline">¶</a></h1>
<p>This page describes the process of setting up google cloud and
configuring TensorFlow Studio to integrate with it.</p>
<div class="section" id="id1">
<h2>Setting up google cloud compute<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="create-select-a-new-google-cloud-project">
<h3>Create / select a new google cloud project<a class="headerlink" href="#create-select-a-new-google-cloud-project" title="Permalink to this headline">¶</a></h3>
<p>Go to google cloud console (<a class="reference external" href="https://console.cloud.google.com">https://console.cloud.google.com</a>), and
create either choose a project that you will use to back cloud
computing; or create a new one. If you have not used google console
before and there are no projects, there will be a big button “create
project” in a dashboard. Otherwise, you can create a new project by
selecting an drop-down arrow next to current project name in the top
panel, and then click “+” button.</p>
</div>
<div class="section" id="enable-billing-for-the-project">
<h3>Enable billing for the project<a class="headerlink" href="#enable-billing-for-the-project" title="Permalink to this headline">¶</a></h3>
<p>Google cloud computing actually bills you for the compute time you
use… So you have to have billing enabled. On the bright side, when you
sign up to google cloud, they provide $300 of promotional credit, so
really in the beginning you are still using it for free. On the not so
bright side, to be able to use machines with gpus, you’ll need to show
that you are a legitimate customer and add $35 to your billing account.
In order to enable billing, go to left-hand pane in google cloud
console, select billing, and follow the instructions to set up payment
method.</p>
</div>
<div class="section" id="generate-service-credentials">
<h3>Generate service credentials<a class="headerlink" href="#generate-service-credentials" title="Permalink to this headline">¶</a></h3>
<p>The machines that run submit cloud jobs will need to be authorized with
service credentials. Go to left-hand pane in the google cloud console,
select API Manager -&gt; Credentials. Then click “Create credentials”
button, choose service account key, leave key type as JSON, in the
“Service account” drop-down select “New service account”. Enter a
service account name (the name can be virtually anything and won’t
matter for the rest of the instructions). Important part is selecting a
role. Click “Select a role” dropdown menu, scroll down to “Compute
Engine” and select “Compute Engine Admin (v1)”. Then scroll down to
“Pub/Sub”, and add a role “Pub/Sub editor” (this is required to create
queues, publish and read messages from them). You can also add other
roles if you are planning to use these credentials in other
applications. When done, click “Create”. Google cloud console should
generate a json credentials file and save it to your computer.</p>
</div>
</div>
<div class="section" id="setting-up-studio">
<h2>Setting up studio<a class="headerlink" href="#setting-up-studio" title="Permalink to this headline">¶</a></h2>
<div class="section" id="adding-credentials">
<h3>Adding credentials<a class="headerlink" href="#adding-credentials" title="Permalink to this headline">¶</a></h3>
<p>Copy the json file credentials to the machine where studio run will be
run, and create environment variable <code class="docutils literal"><span class="pre">GOOGLE_APPLICATION_CREDENTIALS</span></code>
that points to it. That is, run</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">GOOGLE_APPLICATION_CREDENTIALS</span><span class="o">=/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">credentials</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>Note that this variable will be gone when you restart the terminal, so
if you want to use it constantly, add it to <code class="docutils literal"><span class="pre">~/.bashrc</span></code> (linux) or
<code class="docutils literal"><span class="pre">~/.bash_profile</span></code> (OS X)</p>
</div>
<div class="section" id="modifying-the-configuration-file">
<h3>Modifying the configuration file<a class="headerlink" href="#modifying-the-configuration-file" title="Permalink to this headline">¶</a></h3>
<p>In the config file (the one that you use with –config flag, or, if you
use default, in the <code class="docutils literal"><span class="pre">studio/default_config.yaml</span></code>), go to the <code class="docutils literal"><span class="pre">cloud</span></code>
section. Change projectId to the project id of the google project that
you enabled cloud computing under. You can also modify default instance
parameters (see <a class="reference external" href="cloud.md">Cloud computing for studio</a> for
limitations though).</p>
</div>
<div class="section" id="test">
<h3>Test<a class="headerlink" href="#test" title="Permalink to this headline">¶</a></h3>
<p>To test if things are set up correctly, go to
<code class="docutils literal"><span class="pre">studio/studio/helloworld</span></code> and run</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">studio</span> <span class="n">run</span> <span class="o">--</span><span class="n">cloud</span><span class="o">=</span><span class="n">gcloud</span> <span class="n">report_system_info</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Then run <code class="docutils literal"><span class="pre">studio</span></code> locally, and watch the new experiment. In a little
while, it should change its status to “finished” and show the system
information (number of cpus, amount of ram / hdd) of a default instance.
See <a class="reference external" href="cloud.md">Cloud computing for studio</a> for more instructions on
using an instance with specific hardware parameters.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="hyperparams.html" class="btn btn-neutral float-right" title="Hyperparameter search" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ec2_setup.html" class="btn btn-neutral" title="Configuring tfstudio to work with Amazon EC2 cloud" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/_static/js/modernizr.min.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>